# Good Vibes Gallery

The _Good Vibes_ Gallery is a website which showcases community submitted websites. Users submit websites via GitHub Issues, which triggers automated processing through GitHub Actions. The site is built with Astro, uses Bun as the runtime, and is deployed to GitHub Pages.

This project uses Astro's content-driven architecture with the latest HTML, CSS, and ECMAScript Baseline web platform features.

## Project Architecture

- **Framework**: Astro (static site generator)
- **Runtime**: Bun (package manager, runtime, SQLite database)
- **Database**: SQLite for content management (bun:sqlite)
- **Frontend**: Astro components + Modern CSS (Islands Architecture)
- **Build**: Astro static site generation with database integration
- **Deployment**: GitHub Pages via GitHub Actions (also supports Netlify)
- **Submission**: GitHub Issues with automated workflow

## Dev Environment

### Setup

- Utilize MCP servers (especially Astro docs MCP and Netlify MCP) and web search for referencing documentation
- Use Bun as the package manager and runtime
- Run `bun install` to install dependencies (Astro, integrations, etc.)
- Astro configuration is in `astro.config.mjs`

### Development

- Run `bun run dev` to start Astro dev server with hot module reloading
- Astro dev server runs at `http://localhost:4321` by default
- Run `bun run build` to generate static site in `dist/`
- Run `bun run preview` to preview the production build locally
- Astro automatically handles file-based routing in `src/pages/`

### Production

- Run `bun run build` to build the production version with Astro
- Astro generates optimized static files to `dist/` directory
- HTML is minified, assets are optimized, and JavaScript is bundled
- Deployed automatically via GitHub Actions on push to main
- Site is fully static with no server runtime required

### Code Quality

- Always format changes using `bunx prettier --write [file]`
- Follow TypeScript strict mode conventions
- Use CSS cascade layers for organization
- Lint Astro files with `bun run astro check` for type safety
- Astro components use `.astro` extension with component script in frontmatter

## Project Structure

```
src/
├── pages/           # Astro pages (file-based routing)
├── layouts/         # Astro layout components
├── components/      # Astro and framework components
├── db/              # Database schema, queries, and initialization
├── content/         # Content collections (optional)
├── styles/          # Global CSS and style utilities
└── types/           # TypeScript type definitions

scripts/             # Automation scripts (submission processing)
public/              # Static assets (CSS, JS, images, fonts)
.github/             # GitHub Actions workflows and issue templates
dist/                # Build output (generated by Astro, not committed)
data/                # SQLite database (gitignored)
astro.config.mjs     # Astro configuration file
tsconfig.json        # TypeScript configuration
```

## Key Scripts

- `bun run dev` - Start Astro dev server with HMR
- `bun run build` - Build static site with Astro
- `bun run preview` - Preview production build locally
- `bun run astro check` - Type check Astro components
- `bun run db:init` - Initialize SQLite database
- `bun run db:seed` - Seed with sample data
- `bun run clean` - Clean build artifacts and cache
- `bun run process-submission` - Process GitHub Issue submission

## Astro Guidelines

### Component Architecture

- Use `.astro` components for content-heavy, static parts
- Component frontmatter (---) contains server-side TypeScript
- Props are accessed directly in frontmatter and template
- Use Astro's Islands Architecture for interactive components
- Leverage Astro's built-in optimizations (image optimization, etc.)

### Routing & Pages

- File-based routing in `src/pages/` directory
- `index.astro` → `/`, `about.astro` → `/about`
- Dynamic routes use `[param].astro` syntax
- Use `getStaticPaths()` for dynamic route generation from database

### Content & Data

- Fetch database content in component frontmatter (server-side)
- Use Astro's Content Collections for structured content (if needed)
- Props passed from layouts to pages are type-safe

### CSS Guidelines

Use CSS Baseline 2024+ features:

- `@layer` for cascade organization (reset, tokens, layout, components, utilities)
- Scoped styles in `<style>` tags within Astro components
- Global styles in `src/styles/` imported via layouts
- Container queries for responsive components
- `:has()` for parent selection
- `color-mix()` or relative color syntax for color variations
- `light-dark()` for automatic dark mode
- `subgrid` for nested grid layouts
- View Transitions API (Astro has built-in support via `<ViewTransitions />`)

## Development Workflow

1. **Project Setup** - Initialize Astro project with Bun runtime
2. **Database Layer** - Implement schema, queries, and seed data (SQLite)
3. **Astro Configuration** - Configure integrations, adapters, and build options
4. **Layouts & Components** - Create reusable Astro layouts and components
5. **Pages & Routing** - Implement file-based routing with dynamic routes
6. **Data Integration** - Connect database to Astro pages via `getStaticPaths()`
7. **Styling** - Use modern CSS with cascade layers and scoped styles
8. **Optimization** - Leverage Astro's built-in image and asset optimization
9. **Automation** - Set up GitHub Actions for submissions and deployment
10. **Testing** - Performance, accessibility, and functionality
11. **Deploy** - Build static site and deploy to GitHub Pages