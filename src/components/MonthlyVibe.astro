---
import { Image } from 'astro:assets';
import ghostImage from '../assets/image/monthly/ghost.png';

export interface Props {
  label?: string;
  title?: string;
  imageAlt?: string;
  ctaText?: string;
  ctaUrl?: string;
  date?: string;
  footerText?: string;
}

const {
  label = "Monthly Vibe",
  title = "Ghost",
  imageAlt = "Monthly vibe: Ghost",
  ctaText = "Submit",
  ctaUrl = "https://github.com/vmljg/good-vibes-gallery/issues/new?template=show-and-tell.yml",
  date = "October 2025",
  footerText = "Good Vibes"
} = Astro.props;
---

<section
  id="monthly-vibe"
  class="monthly-vibe-section"
  data-scrollbar-color="--color-featured"
>
  <div class="monthly-vibe-section__content">
    <span class="monthly-vibe-section__label text-uppercase">{label}</span>
    <h2 class="monthly-vibe-section__title text-uppercase">{title}</h2>
    <div class="monthly-vibe-section__footer">
      <span class="monthly-vibe-section__footer-item text-uppercase">
        {footerText}
      </span>
    </div>
  </div>
  <div class="monthly-vibe-section__image-container">
    <Image
      src={ghostImage}
      alt={imageAlt}
      class="monthly-vibe-section__image"
      widths={[400, 800, 1200]}
      sizes="100vw"
      loading="eager"
      format="webp"
    />
    <a href={ctaUrl} class="monthly-vibe-section__cta text-uppercase">
      {ctaText}
    </a>
    <time
      class="monthly-vibe-section__date text-uppercase"
      datetime="2025-10"
    >
      {date}
    </time>
  </div>
</section>

<style>
  .monthly-vibe-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-block-size: 100vh;
    inline-size: 100%;
    color-scheme: light dark;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    background-color: var(--bg-primary);
  }

  .monthly-vibe-section__content {
    display: grid;
    grid-template-columns: var(--gutter-outer) 1fr var(--gutter-inner);
    grid-template-rows: var(--gutter-content) auto 1fr auto var(
        --gutter-content
      );
    grid-template-areas:
      ". . ."
      ". label ."
      ". title ."
      ". footer ."
      ". . .";
    background-color: var(--bg-monthly-vibe);
    block-size: var(--section-height-extended);
  }

  .monthly-vibe-section__label {
    grid-area: label;
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: 500;
    letter-spacing: var(--tracking-wide);
    color: var(--text-primary);
  }

  .monthly-vibe-section__title {
    grid-area: title;
    font-family: var(--font-serif);
    font-size: clamp(3rem, 9vw, 10rem);
    font-weight: 700;
    line-height: 0.9;
    color: var(--text-primary);
    align-self: start;
    position: sticky;
    inset: calc(50vh - var(--gutter-content));
    margin-block: calc(1.5rem + var(--gutter-content));
  }

  .monthly-vibe-section__footer {
    grid-area: footer;
    display: flex;
    align-items: end;
  }

  .monthly-vibe-section__footer-item {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: 500;
    letter-spacing: var(--tracking-wide);
    color: var(--text-primary);
  }

  .monthly-vibe-section__image-container {
    position: relative;
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    place-items: center;
    overflow: hidden;
    block-size: 100vh;
    position: sticky;
    inset: 0;
  }

  .monthly-vibe-section__image {
    grid-column: 1 / -1;
    grid-row: 1 / -1;
    inline-size: 100%;
    block-size: 100%;
    object-fit: cover;
    object-position: center;
  }

  .monthly-vibe-section__cta {
    grid-column: 1 / -1;
    grid-row: 1 / -1;
    display: grid;
    place-items: center;
    inline-size: clamp(10rem, 20vw, 15rem);
    block-size: clamp(10rem, 20vw, 15rem);
    background-color: var(--bg-surface);
    font-family: var(--font-sans);
    font-size: var(--text-lg);
    font-weight: 700;
    letter-spacing: var(--tracking-wide);
    color: var(--text-primary);
    text-decoration: none;
    z-index: 1;
    border-radius: 50%;
  }

  .monthly-vibe-section__date {
    position: absolute;
    inset-block-end: var(--gutter-content);
    inset-inline-end: var(--gutter-content);
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: 500;
    letter-spacing: var(--tracking-wide);
    color: var(--text-primary);
    filter: invert(1);
    mix-blend-mode: difference;

    @supports (color: contrast-color(white vs black, white)) {
      filter: none;
      mix-blend-mode: normal;
      color: contrast-color(from var(--bg-primary) srgb vs white, black);
    }
  }

  @media (inline-size < 48rem) {
    .monthly-vibe-section {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr 1fr;
    }

    .monthly-vibe-section__title {
      font-size: clamp(3rem, 15vw, 6rem);
    }
  }
</style>
